<!DOCTYPE html>
<html lang="ja">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>ãƒ©ãƒ³ãƒ€ãƒ é³¥ç”»åƒãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ï¼ˆç„¡æ–™APIç‰ˆï¼‰</title>
	<style>
		body {
			font-family: 'Arial', sans-serif;
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			margin: 0;
			padding: 20px;
			min-height: 100vh;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
		}

		.container {
			background: rgba(255, 255, 255, 0.95);
			border-radius: 20px;
			padding: 30px;
			box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
			max-width: 700px;
			width: 100%;
			text-align: center;
			backdrop-filter: blur(10px);
		}

		h1 {
			color: #333;
			margin-bottom: 30px;
			font-size: 2.5em;
			background: linear-gradient(45deg, #667eea, #764ba2);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
		}

		.btn {
			background: linear-gradient(45deg, #667eea, #764ba2);
			color: white;
			border: none;
			padding: 15px 35px;
			border-radius: 30px;
			cursor: pointer;
			font-size: 18px;
			margin: 15px;
			transition: all 0.3s ease;
			box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
		}

		.btn:hover {
			transform: translateY(-3px);
			box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
		}

		.btn:active {
			transform: translateY(-1px);
		}

		.btn:disabled {
			background: #ccc;
			cursor: not-allowed;
			transform: none;
			box-shadow: none;
		}

		.btn-group {
			display: flex;
			flex-wrap: wrap;
			justify-content: center;
			gap: 10px;
			margin: 20px 0;
		}

		.btn-small {
			padding: 10px 20px;
			font-size: 14px;
		}

		.image-container {
			margin: 25px 0;
			border-radius: 15px;
			overflow: hidden;
			box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
			position: relative;
			background: #f8f9fa;
			min-height: 400px;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.bird-image {
			max-width: 100%;
			max-height: 500px;
			object-fit: contain;
			border-radius: 15px;
			transition: all 0.5s ease;
			cursor: pointer;
		}

		.bird-image:hover {
			transform: scale(1.02);
		}

		.loading {
			color: #667eea;
			font-size: 18px;
			margin: 30px 0;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 10px;
		}

		.loading::after {
			content: '';
			width: 20px;
			height: 20px;
			border: 3px solid #f3f3f3;
			border-top: 3px solid #667eea;
			border-radius: 50%;
			animation: spin 1s linear infinite;
		}

		@keyframes spin {
			0% {
				transform: rotate(0deg);
			}

			100% {
				transform: rotate(360deg);
			}
		}

		.error {
			color: #e74c3c;
			background: #ffe6e6;
			padding: 20px;
			border-radius: 10px;
			margin: 15px 0;
			border-left: 4px solid #e74c3c;
		}

		.image-info {
			background: linear-gradient(45deg, rgba(102, 126, 234, 0.9), rgba(118, 75, 162, 0.9));
			color: white;
			padding: 15px;
			font-size: 14px;
			text-align: left;
			border-radius: 0 0 15px 15px;
		}

		.success-badge {
			background: #27ae60;
			color: white;
			padding: 8px 16px;
			border-radius: 20px;
			font-size: 14px;
			font-weight: bold;
			display: inline-block;
			margin-bottom: 20px;
			animation: pulse 2s infinite;
		}

		@keyframes pulse {
			0% {
				transform: scale(1);
			}

			50% {
				transform: scale(1.05);
			}

			100% {
				transform: scale(1);
			}
		}

		.auto-reload {
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 10px;
			margin: 20px 0;
		}

		.auto-reload input[type="checkbox"] {
			transform: scale(1.2);
		}

		.note {
			background: #e8f4fd;
			border: 1px solid #b3d9ff;
			border-radius: 8px;
			padding: 15px;
			margin: 20px 0;
			font-size: 14px;
			text-align: left;
		}

		.stats {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
			gap: 15px;
			margin: 20px 0;
		}

		.stat-card {
			background: rgba(102, 126, 234, 0.1);
			padding: 15px;
			border-radius: 10px;
			text-align: center;
		}

		.stat-number {
			font-size: 24px;
			font-weight: bold;
			color: #667eea;
		}

		.stat-label {
			font-size: 12px;
			color: #666;
			margin-top: 5px;
		}

		.api-status {
			display: flex;
			justify-content: space-around;
			margin: 15px 0;
			font-size: 12px;
		}

		.api-indicator {
			padding: 5px 10px;
			border-radius: 15px;
			font-weight: bold;
		}

		.api-success {
			background: #d4edda;
			color: #155724;
		}

		.api-failed {
			background: #f8d7da;
			color: #721c24;
		}

		@media (max-width: 600px) {
			.container {
				margin: 10px;
				padding: 20px;
			}

			h1 {
				font-size: 2em;
			}

			.btn-group {
				flex-direction: column;
			}
		}
	</style>
</head>

<body>
	<div class="container">
		<h1>ğŸ¦ ãƒ©ãƒ³ãƒ€ãƒ é³¥ç”»åƒãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼</h1>

		<div class="success-badge">ğŸ†“ å®Œå…¨ç„¡æ–™ãƒ»APIã‚­ãƒ¼ä¸è¦ï¼</div>

		<div class="note">
			<strong>ğŸ¦ é³¥å°‚ç”¨API:</strong><br>
			è¤‡æ•°ã®ç„¡æ–™é³¥ç”»åƒAPIã‚’è‡ªå‹•ã§è©¦è¡Œã—ã€æœ€é©ãªç”»åƒã‚’è¡¨ç¤ºã—ã¾ã™ã€‚å®Œå…¨ç„¡æ–™ã§APIã‚­ãƒ¼ç™»éŒ²ä¸è¦ï¼
		</div>

		<div class="api-status" id="apiStatus">
			<div class="api-indicator api-success">APIæº–å‚™ä¸­...</div>
		</div>

		<div class="stats" id="stats">
			<div class="stat-card">
				<div class="stat-number" id="imageCount">0</div>
				<div class="stat-label">è¡¨ç¤ºå›æ•°</div>
			</div>
			<div class="stat-card">
				<div class="stat-number" id="apiUsed">-</div>
				<div class="stat-label">ä½¿ç”¨API</div>
			</div>
			<div class="stat-card">
				<div class="stat-number" id="timeCount">00:00</div>
				<div class="stat-label">çµŒéæ™‚é–“</div>
			</div>
		</div>

		<button class="btn" onclick="loadRandomBirdImage()">ğŸ¦ æ–°ã—ã„é³¥ç”»åƒã‚’è¡¨ç¤º</button>

		<div class="auto-reload">
			<input type="checkbox" id="autoReload">
			<label for="autoReload">8ç§’ã”ã¨ã«è‡ªå‹•æ›´æ–°</label>
		</div>

		<div id="loading" class="loading" style="display: none;">
			ç¾ã—ã„é³¥ç”»åƒã‚’æ¢ã—ã¦ã„ã¾ã™
		</div>

		<div id="error" class="error" style="display: none;"></div>

		<div id="imageContainer" class="image-container" style="display: none;">
			<img id="birdImage" class="bird-image" alt="é³¥ã®ç”»åƒ">
		</div>

		<div id="imageInfo" class="image-info" style="display: none;"></div>
	</div>

	<script>
		let autoReloadInterval = null;
		let imageCounter = 0;
		let startTime = Date.now();
		let currentApi = 'Unknown';

		// é³¥ç”»åƒAPIã®ãƒªã‚¹ãƒˆï¼ˆå„ªå…ˆé †ï¼‰
		const birdApis = [
			{
				name: 'Shibe.Online',
				url: 'https://shibe.online/api/birds?count=1&urls=true&httpsUrls=true',
				type: 'array'
			},
			{
				name: 'Some Random API',
				url: 'https://some-random-api.ml/img/bird',
				type: 'object'
			},
			{
				name: 'Random Birds API',
				url: 'https://random-birds-api.herokuapp.com/api/random',
				type: 'object'
			}
		];

		// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«æœ€åˆã®ç”»åƒã‚’è¡¨ç¤º
		window.addEventListener('load', () => {
			loadRandomBirdImage();
			updateTimer();
		});

		// è‡ªå‹•ãƒªãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
		document.getElementById('autoReload').addEventListener('change', function () {
			if (this.checked) {
				autoReloadInterval = setInterval(loadRandomBirdImage, 8000);
			} else {
				if (autoReloadInterval) {
					clearInterval(autoReloadInterval);
					autoReloadInterval = null;
				}
			}
		});

		// ã‚¿ã‚¤ãƒãƒ¼æ›´æ–°
		function updateTimer() {
			setInterval(() => {
				const elapsed = Math.floor((Date.now() - startTime) / 1000);
				const minutes = Math.floor(elapsed / 60);
				const seconds = elapsed % 60;
				document.getElementById('timeCount').textContent =
					`${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
			}, 1000);
		}

		async function loadRandomBirdImage() {
			showLoading(true);
			hideError();
			updateApiStatus('è©¦è¡Œä¸­...');

			// APIã‚’é †ç•ªã«è©¦è¡Œ
			for (let i = 0; i < birdApis.length; i++) {
				const api = birdApis[i];

				try {
					updateApiStatus(`${api.name} ã‚’è©¦è¡Œä¸­...`);

					const response = await fetch(api.url);

					if (!response.ok) {
						throw new Error(`HTTP ${response.status}`);
					}

					const data = await response.json();
					let imageUrl;

					// ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã«å¿œã˜ã¦ç”»åƒURLã‚’æŠ½å‡º
					if (api.type === 'array') {
						imageUrl = Array.isArray(data) && data.length > 0 ? data[0] : null;
					} else {
						imageUrl = data.link || data.url || data.image || data.src;
					}

					if (imageUrl) {
						currentApi = api.name;
						updateApiStatus(`${api.name} æˆåŠŸ`, true);
						displayImage(imageUrl, api.name);
						return; // æˆåŠŸã—ãŸã‚‰çµ‚äº†
					}

				} catch (error) {
					console.warn(`${api.name} failed:`, error);
					updateApiStatus(`${api.name} å¤±æ•—`, false);
					continue; // æ¬¡ã®APIã‚’è©¦è¡Œ
				}
			}

			// å…¨ã¦ã®APIãŒå¤±æ•—ã—ãŸå ´åˆã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”»åƒã‚’ç”Ÿæˆ
			showError('å…¨ã¦ã®é³¥ç”»åƒAPIãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚ä»£æ›¿ç”»åƒã‚’ç”Ÿæˆã—ã¾ã™...');
			generateFallbackBirdImage();
		}

		function generateFallbackBirdImage() {
			// SVGã§é³¥ã®ç”»åƒã‚’ç”Ÿæˆï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
			const birdColors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD', '#98D8C8'];
			const randomColor = birdColors[Math.floor(Math.random() * birdColors.length)];

			const birdNames = ['ã‚¹ã‚ºãƒ¡', 'ã‚«ãƒ©ã‚¹', 'ãƒãƒˆ', 'ãƒ„ãƒãƒ¡', 'ã‚«ãƒ¯ã‚»ãƒŸ', 'ãƒ•ã‚¯ãƒ­ã‚¦', 'ã‚¿ã‚«', 'ãƒ¯ã‚·'];
			const randomBird = birdNames[Math.floor(Math.random() * birdNames.length)];

			const svgBird = `
                <svg width="400" height="300" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="birdGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:${randomColor};stop-opacity:1" />
                            <stop offset="100%" style="stop-color:${randomColor}88;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <rect width="400" height="300" fill="#87CEEB"/>
                    <circle cx="80" cy="80" r="30" fill="white" opacity="0.8"/>
                    <circle cx="320" cy="100" r="20" fill="white" opacity="0.6"/>
                    <ellipse cx="200" cy="180" rx="80" ry="50" fill="url(#birdGrad)"/>
                    <circle cx="180" cy="160" r="25" fill="url(#birdGrad)"/>
                    <polygon points="120,160 140,170 130,180" fill="#FFA500"/>
                    <circle cx="165" cy="155" r="5" fill="black"/>
                    <ellipse cx="220" cy="220" rx="15" ry="8" fill="#8B4513"/>
                    <ellipse cx="260" cy="225" rx="15" ry="8" fill="#8B4513"/>
                    <text x="200" y="260" text-anchor="middle" font-family="Arial" font-size="20" fill="#333">${randomBird}</text>
                </svg>
            `;

			const blob = new Blob([svgBird], { type: 'image/svg+xml' });
			const url = URL.createObjectURL(blob);

			currentApi = 'SVGç”Ÿæˆ';
			updateApiStatus('SVGç”»åƒç”Ÿæˆ', true);
			displayImage(url, 'SVGç”Ÿæˆ');
		}

		function displayImage(imageUrl, apiName) {
			const img = document.getElementById('birdImage');
			const info = document.getElementById('imageInfo');
			const container = document.getElementById('imageContainer');

			img.onload = function () {
				imageCounter++;

				container.style.display = 'flex';
				info.style.display = 'block';

				const currentTime = new Date().toLocaleString('ja-JP');

				// çµ±è¨ˆæ›´æ–°
				document.getElementById('imageCount').textContent = imageCounter;
				document.getElementById('apiUsed').textContent = apiName;

				info.innerHTML = `
                    <strong>ğŸ¦ ç”»åƒæä¾›:</strong> ${apiName}<br>
                    <strong>ğŸ“· ç”»åƒç•ªå·:</strong> ${imageCounter}<br>
                    <strong>ğŸ•’ å–å¾—æ™‚åˆ»:</strong> ${currentTime}<br>
                    <strong>âœ… ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:</strong> æ­£å¸¸å‹•ä½œ<br>
                    <strong>ğŸ”— API:</strong> ç„¡æ–™ãƒ»APIã‚­ãƒ¼ä¸è¦<br>
                    <em>ğŸ’¡ ç”»åƒã‚’ã‚¯ãƒªãƒƒã‚¯ã¾ãŸã¯ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã§æ–°ã—ã„ç”»åƒã‚’è¡¨ç¤º</em>
                `;

				showLoading(false);
			};

			img.onerror = function () {
				console.warn('Image failed to load, trying fallback...');
				if (apiName !== 'SVGç”Ÿæˆ') {
					generateFallbackBirdImage();
				} else {
					showError('ç”»åƒã®è¡¨ç¤ºã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
					showLoading(false);
				}
			};

			// ç”»åƒã‚’ã‚¯ãƒªãƒƒã‚¯ã§æ–°ã—ã„ç”»åƒã‚’è¡¨ç¤º
			img.onclick = function () {
				loadRandomBirdImage();
			};

			img.src = imageUrl;
		}

		function updateApiStatus(message, success = null) {
			const statusDiv = document.getElementById('apiStatus');
			if (success === true) {
				statusDiv.innerHTML = `<div class="api-indicator api-success">${message}</div>`;
			} else if (success === false) {
				statusDiv.innerHTML = `<div class="api-indicator api-failed">${message}</div>`;
			} else {
				statusDiv.innerHTML = `<div class="api-indicator">${message}</div>`;
			}
		}

		function showLoading(show) {
			document.getElementById('loading').style.display = show ? 'block' : 'none';
		}

		function showError(message) {
			const errorDiv = document.getElementById('error');
			errorDiv.textContent = message;
			errorDiv.style.display = 'block';
		}

		function hideError() {
			document.getElementById('error').style.display = 'none';
		}

		// ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
		document.addEventListener('keydown', function (event) {
			if (event.code === 'Space') {
				event.preventDefault();
				loadRandomBirdImage();
			}
		});

		// è©³ç´°æƒ…å ±è¡¨ç¤º
		function showApiDetails() {
			const details = `
ğŸ¦ é³¥ç”»åƒAPIè©³ç´°:

âœ… Shibe.Online API
   - é³¥ã€çŒ«ã€æŸ´çŠ¬ã®ç”»åƒ
   - å®Œå…¨ç„¡æ–™ãƒ»APIã‚­ãƒ¼ä¸è¦

âœ… Some Random API  
   - æ§˜ã€…ãªå‹•ç‰©ç”»åƒ
   - å®Œå…¨ç„¡æ–™ãƒ»APIã‚­ãƒ¼ä¸è¦

âœ… SVGãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
   - APIå¤±æ•—æ™‚ã®ä»£æ›¿ç”»åƒ
   - ã‚«ãƒ©ãƒ•ãƒ«ãªé³¥ã®ã‚¤ãƒ©ã‚¹ãƒˆ

ğŸ® æ“ä½œæ–¹æ³•:
- ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼: æ–°ã—ã„ç”»åƒ
- ç”»åƒã‚¯ãƒªãƒƒã‚¯: æ–°ã—ã„ç”»åƒ
- è‡ªå‹•æ›´æ–°: ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹
            `;
			alert(details);
		}

		// ã‚¢ãƒ—ãƒªæƒ…å ±ãƒœã‚¿ãƒ³
		const infoBtn = document.createElement('button');
		infoBtn.textContent = 'ğŸ“‹ APIè©³ç´°';
		infoBtn.className = 'btn btn-small';
		infoBtn.onclick = showApiDetails;
		document.querySelector('.btn-group').appendChild(infoBtn);
	</script>
</body>

</html>
